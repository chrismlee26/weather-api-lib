<!DOCTYPE html>
<html>
  <head>
    <title>Darkmode Neumorphic Weather Checker</title>
    <style>
      body, html {
        height: 100%;
      }
      body {
        background-color: #292929;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        font-size: 20px;
        font-weight: lighter;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      h1, p {
        margin: 0 0 1rem 0;
        color: white;
      }

      .container {
        width: 400px;
        display: flex;
        flex-direction: column;
        border: 1px
      }

      #form {
        display: flex;
      }

      #form > input {
        flex: 1;
        padding: 1em;
        font-size: 1em;
        margin: 1em 1em 1em 0;
        color: white;
        border-radius: 8px;
        background: #292929;
        box-shadow: inset 6px 6px 6px #202020, inset -8px -8px 6px #323232;
      }

      #form > button {
        padding: 0 1em;
        color: white;
        font-size: 1em;
        margin: 1em 1em 1em 0;
        border-radius: 8px;
        background: linear-gradient(145deg, #252525, #2c2c2c);
        box-shadow:  8px 8px 6px #232323, -7px -7px 9px #2f2f2f;
      }

      button:focus,
      input:focus {
        outline: none;
      }

      input:-internal-autofill-selected {
      background-color: transparent;
      }

      #feels_like,
      #min_max {
        font-size: 8px;
        font-style: italic;
      }
      
    </style>
  </head>
  <body>
    <div class="container">
      <h1 id="temp"><!--Temp --></h1>
      <p id="desc"><!-- Description --></p>
      <p id="feels_like"><!-- Feels Like --></p>
      <p id="min_max"><!-- Min Max --></p>
      <form id="form">
        <input 
          id="input-field" 
          type="text"
          placeholder="zip, city or lat, lon"
          title="Please Enter an Input"
          required
        />
        <button type="submit">search</button>
      </form>
    </div>
    <script type="module">
      import { getWeather, getWeatherByZip, getWeatherByCity, getWeatherByGeo } from "./scripts.js" //remove getWeather after if not needed.
      import { api__key } from "./config.js"
      // ------------------------------------------------------
      // Developer Code

      // Get Element references
      const tempEl = document.getElementById('temp')
      const descEl = document.getElementById('desc')
      const feels_likeEl = document.getElementById('feels_like')
      const min_maxEl = document.getElementById('min_max')
      const formEl = document.getElementById('form')
      const inputInput = document.getElementById('input-field')
      // Define event listeners
      formEl.addEventListener('submit', (e) => {
        e.preventDefault()
        const input = inputInput.value
        const apiKey = api__key


        // text.includes(','); --- this function checks for commas in a string
        // if (input % 1 === 0) { --- checks for full int without remainder (no floats)
        // (typeof input === 'string' || input instanceof String)
        // input === n && n % 1 !== 0
        // NaN instead of searching for a string??!

        //   if (input % 1 === 0 && input.length === 5) { //Input is full int + 5 digits
        //   return getWeatherByZip(input, apiKey) // weather by zip
        //   .then((data) => {
        //     temp.innerHTML = data.temp
        //     desc.innerHTML = "There's " + data.description + " in " + data.name + ", " + data.country
        //     feels_like.innerHTML = "It feels like " + data.feels_like + " degrees"
        //     min_max.innerHTML = "Today's high is " + data.temp_max + " and today's low is " + data.temp_min
        //   }).catch(err => console.log(err.message))
        // } else if (typeof input === 'string' && !input.includes(',') || input instanceof String ) { //input is string or string instance & no commas
        //   return getWeatherByCity(input, apiKey) // weather by city
        //   .then((data) => {
        //     temp.innerHTML = data.temp
        //     desc.innerHTML = "There's " + data.description + " in " + data.name + ", " + data.country
        //     feels_like.innerHTML = "It feels like " + data.feels_like + " degrees"
        //     min_max.innerHTML = "Today's high is " + data.temp_max + " and today's low is " + data.temp_min
        //   }).catch(err => console.log(err.message))
        // } else if (input.indexOf(' ') >= 1 && input.includes(',')) { //has space and comma 
        //   const splitInput = input.split(' ', 2); //split lat lon input into array of 2
        //   const input1 = splitInput[0].replace(',', ''); //new var from array @ index 0 & remove comma
        //   const input2 = splitInput[1]; // new variable from array @ index 1
        //   return getWeatherByGeo(input1, input2, apiKey) //weather by geo coordinates
        //   .then((data) => {
        //     temp.innerHTML = data.temp
        //     desc.innerHTML = "There's " + data.description + " in " + data.name + ", " + data.country
        //     feels_like.innerHTML = "It feels like " + data.feels_like + " degrees"
        //     min_max.innerHTML = "Today's high is " + data.temp_max + " and today's low is " + data.temp_min
        //   }).catch(err => console.log(err.message))
        // } else { // random edge case handling
        //   desc.innerHTML = "ERROR, Please enter a 5 Digit Zip Code, City Name or Latitude, Longitude"
        // }

        function catchAllWeather(data) {
          if (input % 1 === 0 && input.length === 5) { //Input is full int + 5 digits
            return getWeatherByZip(input, apiKey) // weather by zip
          } else if (typeof input === 'string' && !input.includes(',') || input instanceof String ) { //input is string or string instance & no commas
            return getWeatherByCity(input, apiKey) // weather by city
          } else if (input.indexOf(' ') >= 1 && input.includes(',')) { //has space and comma 
            const splitInput = input.split(' ', 2); //split lat lon input into array of 2
            const input1 = splitInput[0].replace(',', ''); //new var from array @ index 0 & remove comma
            const input2 = splitInput[1]; // new variable from array @ index 1
            return getWeatherByGeo(input1, input2, apiKey) //weather by geo coordinates
          } else { // random edge case handling
          desc.innerHTML = "ERROR, Please enter a 5 Digit Zip Code, City Name or Latitude, Longitude"
          }
        }

          catchAllWeather().then((data) => {
            temp.innerHTML = data.temp
            desc.innerHTML = "There's " + data.description + " in " + data.name + ", " + data.country
            feels_like.innerHTML = "It feels like " + data.feels_like + " degrees"
            min_max.innerHTML = "Today's high is " + data.temp_max + " and today's low is " + data.temp_min
          }).catch(err => console.log(err.message))









    })
    </script>
  </body>
</html>